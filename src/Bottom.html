<script src="https://blog-static.cnblogs.com/files/KonjakLAF/bootstrap.min.js"></script>
<script src="https://blog-static.cnblogs.com/files/KonjakLAF/clipboard.min.js"></script>
<script>
	$(function () {
		// 代码复制功能
		if ($("#cnblogs_post_body").hasClass("cnblogs-markdown")) {
			if ($("#post-date")[0]) {
				var pres = $("pre");
				if (pres.length) {
					pres.each(function () {
						var t = $(this).children("code").text();
						var btn = $('<span class="copy">复制</span>').attr("data-clipboard-text", t);
						$(this).prepend(btn);
						var c = new ClipboardJS(btn[0]);
						c.on("success", function () {
							btn.addClass("copyed").text("复制成功");
						});
						c.on("error", function () {
							btn.text("复制失败");
						});
						btn.mouseleave(function () {
							setTimeout(function () {
								btn.text("复制").removeClass("copyed");
							}, 500);
						});
					});
				}
			}
		}
	});
</script>
<script type="text/javascript">
	$(function () {
		// 隐藏反对按钮
		$("#blogTitle h1").addClass("bounceInLeft animated");
		$("#blogTitle h2").addClass("bounceInRight animated");

		$(".buryit").remove();
		setTimeout(function () {
			showAvatar();
		}, 1000);
	});
	function showAvatar() {
		// 显示评论用户头像
		$(".feedbackItem").each(function () {
			var avatar = $(this).children(".feedbackCon").children("span:last").html();
			avatar = avatar ? avatar.replace("http://", "https://") : "https://pic.cnblogs.com/face/sample_face.gif";
			$('<img src="' + avatar + '" class="user-avatar" />').prependTo($(this).children(".feedbackCon"));
			if ($(this).find(".feedbackListSubtitle").find(".louzhu").length > 0) {
				$(this).addClass("myself");
			}
		});
	}
</script>
<script>
	(function (window, document, undefined) {
		// 鼠标点击爱心特效
		var hearts = [];
		window.requestAnimationFrame = (function () {
			return (
				window.requestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame ||
				window.oRequestAnimationFrame ||
				window.msRequestAnimationFrame ||
				function (callback) {
					setTimeout(callback, 1000 / 60);
				}
			);
		})();
		init();
		function init() {
			css(
				".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}"
			);
			attachEvent();
			gameloop();
		}
		function gameloop() {
			for (var i = 0; i < hearts.length; i++) {
				if (hearts[i].alpha <= 0) {
					document.body.removeChild(hearts[i].el);
					hearts.splice(i, 1);
					continue;
				}
				hearts[i].y--;
				hearts[i].scale += 0.004;
				hearts[i].alpha -= 0.013;
				hearts[i].el.style.cssText =
					"left:" +
					hearts[i].x +
					"px;top:" +
					hearts[i].y +
					"px;opacity:" +
					hearts[i].alpha +
					";transform:scale(" +
					hearts[i].scale +
					"," +
					hearts[i].scale +
					") rotate(45deg);background:" +
					hearts[i].color;
			}
			requestAnimationFrame(gameloop);
		}
		function attachEvent() {
			var old = typeof window.onclick === "function" && window.onclick;
			window.onclick = function (event) {
				old && old();
				createHeart(event);
			};
		}
		function createHeart(event) {
			var d = document.createElement("div");
			d.className = "heart";
			hearts.push({
				el: d,
				x: event.clientX - 5,
				y: event.clientY - 5,
				scale: 1,
				alpha: 1,
				color: randomColor(),
			});
			document.body.appendChild(d);
		}
		function css(css) {
			var style = document.createElement("style");
			style.type = "text/css";
			try {
				style.appendChild(document.createTextNode(css));
			} catch (ex) {
				style.styleSheet.cssText = css;
			}
			document.getElementsByTagName("head")[0].appendChild(style);
		}
		function randomColor() {
			return "rgb(" + ~~(Math.random() * 255) + "," + ~~(Math.random() * 255) + "," + ~~(Math.random() * 255) + ")";
		}
	})(window, document);
</script>
<!-- 添加雪花 -->
<div class="Snow">
	<canvas id="Snow"></canvas>
</div>
<script>
	(function () {
		var requestAnimationFrame =
			window.requestAnimationFrame ||
			window.mozRequestAnimationFrame ||
			window.webkitRequestAnimationFrame ||
			window.msRequestAnimationFrame ||
			function (callback) {
				window.setTimeout(callback, 1000 / 60);
			};
		window.requestAnimationFrame = requestAnimationFrame;
	})();

	(function () {
		var flakes = [],
			canvas = document.getElementById("Snow"), //画布ID，与上一步创建的画布对应
			ctx = canvas.getContext("2d"),
			flakeCount = 200, //雪花数量，数值越大雪花数量越多
			mX = -100,
			mY = -100;

		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;

		function snow() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			for (var i = 0; i < flakeCount; i++) {
				var flake = flakes[i],
					x = mX,
					y = mY,
					minDist = 150, //雪花距离鼠标指针的最小值，小于这个距离的雪花将受到鼠标的排斥
					x2 = flake.x,
					y2 = flake.y;

				var dist = Math.sqrt((x2 - x) * (x2 - x) + (y2 - y) * (y2 - y)),
					dx = x2 - x,
					dy = y2 - y;

				if (dist < minDist) {
					var force = minDist / (dist * dist),
						xcomp = (x - x2) / dist,
						ycomp = (y - y2) / dist,
						deltaV = force / 2;

					flake.velX -= deltaV * xcomp;
					flake.velY -= deltaV * ycomp;
				} else {
					flake.velX *= 0.98;
					if (flake.velY <= flake.speed) {
						flake.velY = flake.speed;
					}
					flake.velX += Math.cos((flake.step += 0.05)) * flake.stepSize;
				}

				ctx.fillStyle = "rgba(255,255,255," + flake.opacity + ")"; //雪花颜色
				flake.y += flake.velY;
				flake.x += flake.velX;

				if (flake.y >= canvas.height || flake.y <= 0) {
					reset(flake);
				}

				if (flake.x >= canvas.width || flake.x <= 0) {
					reset(flake);
				}

				ctx.beginPath();
				ctx.arc(flake.x, flake.y, flake.size, 0, Math.PI * 2);
				ctx.fill();
			}
			requestAnimationFrame(snow);
		}

		function reset(flake) {
			flake.x = Math.floor(Math.random() * canvas.width);
			flake.y = 0;
			flake.size = Math.random() * 3 + 2; //加号后面的值，雪花大小，为基准值，数值越大雪花越大
			flake.speed = Math.random() * 1 + 1.0; //加号后面的值，雪花速度，为基准值，数值越大雪花速度越快
			flake.velY = flake.speed;
			flake.velX = 0;
			flake.opacity = Math.random() * 0.5 + 0.3; //加号后面的值，为基准值，范围0~1
		}

		function init() {
			for (var i = 0; i < flakeCount; i++) {
				var x = Math.floor(Math.random() * canvas.width),
					y = Math.floor(Math.random() * canvas.height),
					size = Math.random() * 3 + 2, //加号后面的值，雪花大小，为基准值，数值越大雪花越大
					speed = Math.random() * 1 + 1.0, //加号后面的值，雪花速度，为基准值，数值越大雪花速度越快
					opacity = Math.random() * 0.5 + 0.3; //加号后面的值，为基准值，范围0~1

				flakes.push({
					speed: speed,
					velY: speed,
					velX: 0,
					x: x,
					y: y,
					size: size,
					stepSize: (Math.random() / 30) * 1, //乘号后面的值，雪花横移幅度，为基准值，数值越大雪花横移幅度越大，0为竖直下落
					step: 0,
					angle: 180,
					opacity: opacity,
				});
			}

			snow();
		}

		document.addEventListener("mousemove", function (e) {
			(mX = e.clientX), (mY = e.clientY);
		});
		window.addEventListener("resize", function () {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
		});
		init();
	})();
</script>
<!-- 添加动态标题 -->
<div style="display: none;"></div>
<script>
	var OriginTitile = document.title; // 保存之前页面标题
	var titleTime;
	document.addEventListener("visibilitychange", function () {
		if (document.hidden) {
			document.title = "你不要我了么？qwq"; // 切出文字
			clearTimeout(titleTime);
		} else {
			document.title = "欢迎回来～"; // 切入文字
			titleTime = setTimeout(function () {
				document.title = OriginTitile;
			}, 1000); // 2秒后恢复原标题
		}
	});
</script>
<!-- 更改标题图标 -->
<div style="display: none;"></div>
<script>
	var linkObject = document.createElement("link");
	linkObject.rel = "shortcut icon";
	linkObject.href = "https://img2020.cnblogs.com/blog/1937713/202005/1937713-20200513155845186-1438415765.png";
	document.getElementsByTagName("head")[0].appendChild(linkObject);
</script>
