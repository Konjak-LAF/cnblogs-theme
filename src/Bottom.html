<script src="https://blog-static.cnblogs.com/files/KonjakLAF/bootstrap.min.js"></script>
<script src="https://blog-static.cnblogs.com/files/KonjakLAF/clipboard.min.js"></script>
<script>
	$(function () {
		if ($("#cnblogs_post_body").hasClass("cnblogs-markdown")) {
			if ($("#post-date")[0]) {
				var pres = $("pre");
				if (pres.length) {
					pres.each(function () {
						var t = $(this).children("code").text();
						var btn = $('<span class="copy">复制</span>').attr("data-clipboard-text", t);
						$(this).prepend(btn);
						var c = new ClipboardJS(btn[0]);
						c.on("success", function () {
							btn.addClass("copyed").text("复制成功");
						});
						c.on("error", function () {
							btn.text("复制失败");
						});
						btn.mouseleave(function () {
							setTimeout(function () {
								btn.text("复制").removeClass("copyed");
							}, 500);
						});
					});
				}
			}
		}
	});
</script>
<script type="text/javascript">
	$(function () {
		$("#blogTitle h1").addClass("bounceInLeft animated");
		$("#blogTitle h2").addClass("bounceInRight animated");

		$(".buryit").remove();
		setTimeout(function () {
			showAvatar();
		}, 1000);
	});
	function showAvatar() {
		$(".feedbackItem").each(function () {
			var avatar = $(this).children(".feedbackCon").children("span:last").html();
			avatar = avatar ? avatar.replace("http://", "https://") : "https://pic.cnblogs.com/face/sample_face.gif";
			$('<img src="' + avatar + '" class="user-avatar" />').prependTo($(this).children(".feedbackCon"));
			if ($(this).find(".feedbackListSubtitle").find(".louzhu").length > 0) {
				$(this).addClass("myself");
			}
		});
	}
</script>
<script>
	(function (window, document, undefined) {
		var hearts = [];
		window.requestAnimationFrame = (function () {
			return (
				window.requestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame ||
				window.oRequestAnimationFrame ||
				window.msRequestAnimationFrame ||
				function (callback) {
					setTimeout(callback, 1000 / 60);
				}
			);
		})();
		init();
		function init() {
			css(
				".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}"
			);
			attachEvent();
			gameloop();
		}
		function gameloop() {
			for (var i = 0; i < hearts.length; i++) {
				if (hearts[i].alpha <= 0) {
					document.body.removeChild(hearts[i].el);
					hearts.splice(i, 1);
					continue;
				}
				hearts[i].y--;
				hearts[i].scale += 0.004;
				hearts[i].alpha -= 0.013;
				hearts[i].el.style.cssText =
					"left:" +
					hearts[i].x +
					"px;top:" +
					hearts[i].y +
					"px;opacity:" +
					hearts[i].alpha +
					";transform:scale(" +
					hearts[i].scale +
					"," +
					hearts[i].scale +
					") rotate(45deg);background:" +
					hearts[i].color;
			}
			requestAnimationFrame(gameloop);
		}
		function attachEvent() {
			var old = typeof window.onclick === "function" && window.onclick;
			window.onclick = function (event) {
				old && old();
				createHeart(event);
			};
		}
		function createHeart(event) {
			var d = document.createElement("div");
			d.className = "heart";
			hearts.push({
				el: d,
				x: event.clientX - 5,
				y: event.clientY - 5,
				scale: 1,
				alpha: 1,
				color: randomColor(),
			});
			document.body.appendChild(d);
		}
		function css(css) {
			var style = document.createElement("style");
			style.type = "text/css";
			try {
				style.appendChild(document.createTextNode(css));
			} catch (ex) {
				style.styleSheet.cssText = css;
			}
			document.getElementsByTagName("head")[0].appendChild(style);
		}
		function randomColor() {
			return "rgb(" + ~~(Math.random() * 255) + "," + ~~(Math.random() * 255) + "," + ~~(Math.random() * 255) + ")";
		}
	})(window, document);
</script>
